{"remainingRequest":"D:\\Projects\\spark\\Spark.UI\\node_modules\\babel-loader\\lib\\index.js!D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects\\spark\\Spark.UI\\src\\components\\Other\\selectWorker.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projects\\spark\\Spark.UI\\src\\components\\Other\\selectWorker.vue","mtime":1635216068720},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:/Projects/spark/Spark.UI/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.regexp.search\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nvar _worker = require(\"@/api/grgl/worker\");\n\nvar _index = _interopRequireDefault(require(\"@/components/OrgSelect/index2\"));\n\nvar _searchForm = _interopRequireDefault(require(\"@/components/Other/searchForm\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default2 = {\n  name: 'WorkerSelect',\n  components: {\n    OrgSelect2: _index.default,\n    SearchForm: _searchForm.default\n  },\n  props: {\n    dialogWidth: {\n      type: String,\n      default: '100%'\n    },\n    // 弹出层的宽度\n    multiple: {\n      type: Boolean,\n      default: true\n    },\n    // 默认多选\n    type: {\n      type: Number,\n      default: null\n    },\n    workerList: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    // 默认选中ID组\n    orgId: {\n      type: Number,\n      default: null\n    },\n    // 默认选中项目部ID\n    year: {\n      type: Number,\n      default: new Date().getFullYear()\n    },\n    // 年份-默认当年\n    bdState: {\n      type: Boolean,\n      default: null\n    },\n    // 是否报到\n    ispause: {\n      type: Boolean,\n      default: null\n    },\n    isexit: {\n      type: Boolean,\n      default: null\n    }\n  },\n  data: function data() {\n    return {\n      open: false,\n      currentPage: 1,\n      pageSize: this.utils.getPersonalSettings().pageSize,\n      total: 0,\n      search: {\n        year: 0,\n        orgIds: [],\n        number: '',\n        name: '',\n        bdState: null,\n        ispause: null,\n        isexit: null\n      },\n      disabled: false,\n      buttonLoading: false,\n      selectionItem: [],\n      tableList: [],\n      yearList: [],\n      tableLoading: null\n    };\n  },\n  activated: function activated() {},\n  mounted: function mounted() {\n    this.fetchData();\n  },\n  methods: {\n    openDialog: function openDialog() {\n      // 清空数据\n      this.selectionItem = [];\n      this.currentPage = 1;\n      this.pageSize = 10;\n\n      if (this.orgId) {\n        this.search.orgIds.push(this.orgId);\n      }\n\n      this.search.number = '';\n      this.search.name = '';\n      this.search.year = this.year;\n      this.search.bdState = this.bdState;\n      this.search.ispause = this.ispause;\n      this.search.isexit = this.isexit;\n      this.open = true;\n\n      if (this.multiple === false) {\n        this.disabled = true;\n      }\n\n      this.goSearch();\n    },\n    fetchData: function fetchData() {\n      this.goSearch();\n    },\n    goSearch: function goSearch() {\n      var _this = this;\n\n      var postData = {};\n      postData.currentPage = this.currentPage;\n      postData.pageSize = this.pageSize;\n      postData.year = this.search.year;\n      postData.orgIds = this.search.orgIds;\n      postData.number = this.search.number;\n      postData.name = this.search.name;\n      postData.bdState = this.search.bdState;\n      postData.pauseState = this.search.ispause;\n      postData.exitState = this.search.isexit;\n      this.buttonLoading = true;\n      setTimeout(function () {\n        _this.getPersonList(postData);\n      }, 700);\n    },\n    getPersonList: function getPersonList(postData) {\n      var _this2 = this;\n\n      (0, _worker.getWorkerPaging)(postData).then(function (res) {\n        var data = res.data,\n            yearOptions = res.yearOptions,\n            count = res.count;\n        _this2.tableList = data; // this.workerList.forEach(wor => {\n        //   this.tableList.forEach(element => {\n        //     if (wor.id === element.id) {\n        //       this.selectionItem.push(element)\n        //     }\n        //   })\n        // })\n\n        _this2.buttonLoading = false;\n        _this2.yearList = yearOptions;\n        _this2.total = count;\n      }).catch(function () {\n        _this2.buttonLoading = false;\n      }); // 已选择项\n\n      var workerIds = [];\n      this.workerList.forEach(function (wor) {\n        workerIds.push(wor.id);\n      });\n\n      if (workerIds.length > 0) {\n        (0, _worker.getWorkerList)({\n          checkIds: workerIds\n        }).then(function (res) {\n          var data = res.data;\n          _this2.selectionItem = data;\n        }).catch();\n      }\n    },\n    add: function add(row) {\n      if (this.multiple === false) {\n        this.selectionItem.push(row);\n        this.save();\n      } else {\n        this.selectionItem.push(row);\n      }\n    },\n    save: function save() {\n      var _this3 = this;\n\n      this.buttonLoading = true; // 触发父组件的事件\n\n      setTimeout(function () {\n        _this3.$emit('getPersons', _this3.selectionItem);\n\n        _this3.buttonLoading = false;\n        _this3.open = false;\n      }, 300);\n    },\n\n    /**\r\n     * @description: 设置分页大小\r\n     * @param {Number} val\r\n     */\n    sizeChange: function sizeChange(val) {\n      this.pageSize = val;\n      this.goSearch();\n    },\n    cancel: function cancel(row) {\n      if (this.multiple === true) {\n        this.selectionItem.splice(row);\n      }\n    }\n  }\n};\nexports.default = _default2;",null]}