{"remainingRequest":"D:\\Projects\\spark\\Spark.UI\\node_modules\\babel-loader\\lib\\index.js!D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects\\spark\\Spark.UI\\src\\views\\ggzx\\grgl\\workerBlacklist\\edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projects\\spark\\Spark.UI\\src\\views\\ggzx\\grgl\\workerBlacklist\\edit.vue","mtime":1635749455679},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:/Projects/spark/Spark.UI/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _workerBlacklist = require(\"@/api/ggzx/workerBlacklist\");\n\nvar _worker = require(\"@/api/ggzx/worker\");\n\nvar _UpFile = _interopRequireDefault(require(\"@/components/UpLoad/UpFile\"));\n\nvar _selectWorker = _interopRequireDefault(require(\"@/components/Other/ggzx/selectWorker\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'WorkerBlacklistEdit',\n  components: {\n    UpFile: _UpFile.default,\n    SelectWorker: _selectWorker.default\n  },\n  props: {\n    obj: {\n      type: Object,\n      default: null\n    }\n  },\n  data: function data() {\n    return {\n      ruleForm: {\n        worker: {},\n        year: null,\n        reason: '',\n        date: null,\n        inUse: true,\n        cancelReason: '',\n        cancelDate: null,\n        fileList: [],\n        remark: ''\n      },\n      worker: null,\n      yearList: [],\n      disabled: false,\n      buttonLoading: false,\n      isLoad: false,\n      rules: {\n        // path: [{ required: true, message: '请输入活动名称', trigger: 'blur' }],\n        year: [{\n          required: true,\n          message: '请选择',\n          trigger: 'blur'\n        }],\n        reason: [{\n          required: true,\n          message: '请输入',\n          trigger: 'blur'\n        }] // component: [\n        //   { required: true, message: '请选择活动区域', trigger: 'blur' }\n        // ]\n\n      }\n    };\n  },\n  wathch: {},\n  mounted: function mounted() {\n    this.initData();\n  },\n  methods: {\n    submitForm: function submitForm(formName) {\n      var _this = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          var newObj = JSON.parse(JSON.stringify(_this.ruleForm));\n\n          if (newObj.worker.name === null) {\n            _this.$message.error('请选择工人！');\n          } else {\n            _this.buttonLoading = true;\n            var postData = {\n              id: newObj.id,\n              year: newObj.year,\n              workerId: newObj.worker.id,\n              reason: newObj.reason,\n              date: newObj.date,\n              inUse: newObj.inUse,\n              cancelReason: newObj.cancelReason,\n              cancelDate: newObj.cancelDate,\n              remark: newObj.remark,\n              fileList: newObj.fileList\n            };\n            (0, _workerBlacklist.saveData)(postData).then(function (response) {\n              _this.$message(response.message);\n\n              _this.buttonLoading = false;\n\n              _this.$emit('dialogClose');\n            }).catch(function () {\n              _this.buttonLoading = false;\n            });\n          }\n        }\n      });\n    },\n    resetForm: function resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    initData: function initData() {\n      var _this2 = this;\n\n      if (this.obj) {\n        var newObj = JSON.parse(JSON.stringify(this.obj)); // this.ruleForm = newObj\n\n        (0, _workerBlacklist.getFormById)({\n          id: newObj.id\n        }).then(function (response) {\n          return _this2.setData(response);\n        });\n      }\n\n      (0, _worker.getDefaultOptions)().then(function (op) {\n        var yearOptions = op.yearOptions;\n        _this2.yearList = yearOptions;\n      });\n    },\n    setData: function setData(response) {\n      this.fileListKey++;\n      this.buttonLoading = true;\n      var data = response.data,\n          fileList = response.fileList;\n      this.ruleForm = data;\n      this.ruleForm.fileList = fileList;\n      var workers = [];\n      workers.push(this.ruleForm.worker);\n      this.workerList = workers;\n      this.disabled = true;\n      this.buttonLoading = false;\n    },\n    getPersons: function getPersons(person) {\n      this.ruleForm.worker = person;\n      this.worker = person;\n    },\n    checkWorker: function checkWorker() {\n      this.$refs.workerRef.openDialog();\n    }\n  }\n};\nexports.default = _default;",null]}