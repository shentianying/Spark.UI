{"remainingRequest":"D:\\Projects\\spark\\Spark.UI\\node_modules\\babel-loader\\lib\\index.js!D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects\\spark\\Spark.UI\\src\\components\\Other\\ggzx\\selectWorker.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projects\\spark\\Spark.UI\\src\\components\\Other\\ggzx\\selectWorker.vue","mtime":1635749455603},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:/Projects/spark/Spark.UI/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _objectSpread2 = _interopRequireDefault(require(\"D:/Projects/spark/Spark.UI/node_modules/@babel/runtime/helpers/objectSpread2\"));\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nvar _worker = require(\"@/api/ggzx/worker\");\n\nvar _SearchBar = _interopRequireDefault(require(\"@/components/SearchBar\"));\n\nvar _searchData = _interopRequireDefault(require(\"./searchData\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default2 = {\n  name: 'WorkerSelect',\n  components: {\n    SearchBar: _SearchBar.default\n  },\n  props: {\n    dialogWidth: {\n      type: String,\n      default: '70%'\n    },\n    // 弹出层的宽度\n    type: {\n      type: Number,\n      default: null\n    },\n    orgIds: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    // 默认选中项目组\n    worker: {\n      type: Object,\n      default: null\n    },\n    // 默认已选择工人\n    year: {\n      type: Number,\n      default: new Date().getFullYear()\n    },\n    // 年份-默认当年\n    bdState: {\n      type: Boolean,\n      default: null\n    },\n    // 是否报到\n    ispause: {\n      type: Boolean,\n      default: null\n    },\n    // 是否暂退\n    isexit: {\n      type: Boolean,\n      default: null\n    } // 是否退场\n\n  },\n  data: function data() {\n    return {\n      open: false,\n      disabled: false,\n      buttonLoading: false,\n      tableList: [],\n      tableLoading: null,\n      searchData: _searchData.default,\n      refresh: false\n    };\n  },\n  activated: function activated() {\n    this.fetchData();\n  },\n  mounted: function mounted() {\n    this.fetchData();\n  },\n  methods: {\n    openDialog: function openDialog() {\n      var _this = this;\n\n      // 清空数据\n      this.tableList = [];\n      this.searchData = this.searchData.map(function (item) {\n        item.value = item.name === 'year' ? _this.year : item.value;\n        item.value = item.name === 'orgIds' ? _this.orgIds : item.value;\n        item.value = item.name === 'number' ? '' : item.value;\n        item.value = item.name === 'name' ? '' : item.value;\n        return item;\n      });\n      this.open = true;\n      this.refresh = true;\n      this.goSearch();\n    },\n    fetchData: function fetchData() {\n      this.goSearch();\n    },\n    goSearch: function goSearch() {\n      var _this2 = this;\n\n      var postData = this.getSearchData();\n      this.buttonLoading = true;\n      setTimeout(function () {\n        _this2.getPersonList(postData);\n      }, 700);\n    },\n\n    /**\r\n     * @description: 搜索栏数据转换\r\n     * @return {Object} request数据\r\n     */\n    getSearchData: function getSearchData() {\n      var lastSearch = {};\n      this.searchData.forEach(function (item) {\n        var value = item.value,\n            transformType = item.transformType,\n            name = item.name;\n\n        if (transformType === 'property-serial') {\n          value.forEach(function (ele, index) {\n            var serial = index + 1;\n            lastSearch[name + serial] = ele;\n          });\n        } else {\n          lastSearch[name] = value;\n        }\n      });\n      return lastSearch;\n    },\n    getPersonList: function getPersonList(postData) {\n      var _this3 = this;\n\n      (0, _worker.getWorkerList)((0, _objectSpread2.default)((0, _objectSpread2.default)({}, postData), {}, {\n        year: this.year,\n        bdState: this.bdState,\n        ispause: this.ispause,\n        isexit: this.isexit,\n        isRefresh: this.refresh\n      })).then(function (res) {\n        var data = res.data,\n            yearOptions = res.yearOptions;\n        _this3.tableList = data;\n        _this3.buttonLoading = false;\n        _this3.searchData = _this3.searchData.map(function (item) {\n          item.options = item.name === 'year' ? yearOptions : item.options;\n          return item;\n        });\n      }).catch(function () {\n        _this3.buttonLoading = false;\n      });\n    },\n    save: function save(row) {\n      var _this4 = this;\n\n      this.buttonLoading = true; // 触发父组件的事件\n\n      setTimeout(function () {\n        _this4.$emit('getPersons', row);\n\n        _this4.buttonLoading = false;\n        _this4.open = false;\n      }, 300);\n    }\n  }\n};\nexports.default = _default2;",null]}