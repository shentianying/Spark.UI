{"remainingRequest":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects\\spark\\Spark.UI\\src\\components\\Other\\AcceptanceCheckList.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projects\\spark\\Spark.UI\\src\\components\\Other\\AcceptanceCheckList.vue","mtime":1635216068718},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { GetAcceptDetailCheckList } from '@/api/cwgl/zjgl/Acceptance.js'\r\nimport OrgSelect from '@/components/SearchBar/form/OrgSelect' // 部门选择器\r\n\r\nexport default {\r\n  name: 'AcceptanceCheckList',\r\n  components: {\r\n    OrgSelect\r\n  },\r\n  props: {\r\n    value: Boolean, // 是否显示\r\n    type: { // 资金形式\r\n      type: [Number, String],\r\n      default: 2\r\n    },\r\n    origin: { // 初始数据,会把这个和新选择地数组合并然后去重,通过onchange返回\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    size: { // 组件尺寸\r\n      type: String,\r\n      default: 'mini'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      tableData: [], // 表格数据\r\n      params: { // 筛选请求参数\r\n        currentPage: 1,\r\n        pageSize: this.utils.getPersonalSettings().pageSize,\r\n        ticketNumber: '',\r\n        orgids: []\r\n      },\r\n      loading: false,\r\n      checkList: [] // 当前选中\r\n    }\r\n  },\r\n  watch: {\r\n    value(val) {\r\n      if (val) this.getzjcdDate()\r\n    }\r\n  },\r\n  methods: {\r\n    // 弹出框选择事件\r\n    handleSelectionChange(val) {\r\n      this.checkList = val\r\n    },\r\n    /**\r\n     * 获取数据\r\n     */\r\n    getzjcdDate() {\r\n      this.loading = true\r\n      GetAcceptDetailCheckList({ ...this.params, capitalTypes: [this.type] }).then(res => {\r\n        if (res.code === 200) {\r\n          const allData = [...this.origin, ...res.data]\r\n          this.tableData = allData.filter((item, index) => {\r\n            // 去重\r\n            return allData.findIndex(v => v.id === item.id) === index\r\n          })\r\n          this.$nextTick(() => {\r\n            this.origin.forEach(row => {\r\n              this.$refs['multipleTable'].toggleRowSelection(row)\r\n            })\r\n          })\r\n        }\r\n      }).finally(() => {\r\n        this.loading = false\r\n      })\r\n    },\r\n    // 重置方法\r\n    rest() {\r\n      this.params.ticketNumber = ''\r\n      this.params.orgids = []\r\n      this.getzjcdDate()\r\n    },\r\n    // 取消方法\r\n    restqx() {\r\n      this.params.ticketNumber = ''\r\n      this.params.orgids = []\r\n      this.$emit('input', false)\r\n    },\r\n    /**\r\n     * 确定\r\n     */\r\n    confirm() {\r\n      this.$emit('onchange', this.checkList)\r\n      this.$emit('input', false)\r\n    }\r\n  }\r\n}\r\n",null]}