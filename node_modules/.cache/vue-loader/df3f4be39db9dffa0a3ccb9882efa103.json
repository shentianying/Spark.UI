{"remainingRequest":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects\\spark\\Spark.UI\\src\\views\\cwgl\\zjgl\\Acceptance\\details.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projects\\spark\\Spark.UI\\src\\views\\cwgl\\zjgl\\Acceptance\\details.vue","mtime":1635749455631},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { GetAcceptDetailById, EnsureAcceptDetail } from '@/api/cwgl/zjgl/Acceptance.js'\r\nexport default {\r\n  name: 'ChengDuiXinXiDetails',\r\n  data() {\r\n    return {\r\n      id: '',\r\n      size: 'mini',\r\n      loading: false,\r\n      gatheringId: '',\r\n      state: -1,\r\n      expendId: '',\r\n      infoList: [\r\n        { label: '票号', value: '', name: 'ticketNumber' },\r\n        { label: '相关单据', value: '', name: 'btn' },\r\n        { label: '部门', value: '', name: 'orgName' },\r\n        { label: '承兑类型', value: '', name: 'capitalType' },\r\n        { label: '开票日期', value: '', name: 'ticketDate' },\r\n        { label: '到期日期', value: '', name: 'expiration' },\r\n        { label: '金额', value: '', name: 'amount' },\r\n        { label: '付款行', value: '', name: 'bank' },\r\n        { label: '出票人', value: '', name: 'drawer' },\r\n        { label: '付款人', value: '', name: 'payer' },\r\n        { label: '收款人', value: '', name: 'payee', monopolize: true },\r\n        { label: '收款日期', value: '', name: 'gatheringDate' },\r\n        { label: '支付日期', value: '', name: 'expendDate' },\r\n        { label: '备注', value: '', name: 'remark' },\r\n        { label: '状态', value: '', name: 'stateName' },\r\n        { label: '制单人', value: '', name: 'createUserName' },\r\n        { label: '制单时间', value: '', name: 'createDate' },\r\n        { label: '更新人', value: '', name: 'lastEditUserName' },\r\n        { label: '更新时间', value: '', name: 'lastEditDate' }\r\n      ]\r\n    }\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    next(vm => {\r\n      vm.initDat()\r\n    })\r\n  },\r\n  methods: {\r\n    /**\r\n     * @description: 初始化数据\r\n     */\r\n    initDat() {\r\n      const { id } = this.$route.query\r\n      if (id) {\r\n        this.id = id\r\n        this.fetchData()\r\n      }\r\n    },\r\n    /**\r\n     * @description: 获取列表数据、搜索数据\r\n     * @return {*}\r\n     */\r\n    async fetchData() {\r\n      this.loading = true\r\n      try {\r\n        // To do\r\n        const res = await GetAcceptDetailById(this.id)\r\n        this.expendId = res.data.expendId\r\n        this.gatheringId = res.data.gatheringId\r\n        this.state = res.data.state\r\n        const dateList = ['gatheringDate', 'ticketDate', 'expiration', 'expendDate']\r\n\r\n        res.data.amount = this.utils.formatMoney(res.data.amount, 2, 0)\r\n        this.infoList.forEach((item) => {\r\n          if (dateList.includes(item.name) && res.data[item.name]) {\r\n            item.value = new Date(res.data[item.name]).toLocaleDateString().replaceAll('/', '-')\r\n          } else {\r\n            item.value = res.data[item.name]\r\n          }\r\n        })\r\n      } catch (e) {\r\n        console.log('fetchData:请求列表数据失败，错误信息：', e)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    ensureAcceptDetail() {\r\n      EnsureAcceptDetail(this.id).then((res) => {\r\n        this.$message.success(res.message)\r\n        this.goBack()\r\n      })\r\n    },\r\n    handleShouZhi(type, id) {\r\n      this.$router.push({ name: 'ShouZhiMessage', query: { type, id, refreshRouterName: this.$route.name }})\r\n    },\r\n    /**\r\n     * 取消并返回上一页\r\n     */\r\n    goBack() {\r\n      this.utils.closeAndRefresh(this.$route.query.refreshRouterName)\r\n    }\r\n  }\r\n}\r\n",null]}