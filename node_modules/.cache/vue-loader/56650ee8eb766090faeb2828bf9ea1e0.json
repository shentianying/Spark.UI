{"remainingRequest":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects\\spark\\Spark.UI\\src\\views\\cwgl\\byj\\Imprest\\StatisticsDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projects\\spark\\Spark.UI\\src\\views\\cwgl\\byj\\Imprest\\StatisticsDetails.vue","mtime":1633684104550},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { GetImprestListByPersonId } from '@/api/xmgl/ProjectSettle.js'\r\nimport TableEx from '@/components/TableEx'\r\nexport default {\r\n  name: 'ImprestStatisticsDetails',\r\n  components: { TableEx },\r\n  data() {\r\n    return {\r\n      size: 'mini',\r\n      myDetails: {}, // 详情数据\r\n      activeName: '2',\r\n      filter: {\r\n        year: new Date().getFullYear()\r\n\r\n      },\r\n      /* 列表数据相关 */\r\n      table: {\r\n        columns: [\r\n          {\r\n            label: '单据号', // 表头\r\n            prop: 'number', // 渲染的属性\r\n            minWidth: '120' // 最小宽度\r\n          },\r\n          {\r\n            label: '摘要',\r\n            prop: 'summary',\r\n            minWidth: '120'\r\n          },\r\n          {\r\n            label: '备注',\r\n            prop: 'remark',\r\n            minWidth: '120'\r\n          },\r\n          {\r\n            label: '部门',\r\n            prop: 'orgName',\r\n            minWidth: '120'\r\n          },\r\n          {\r\n            label: '类别', // 表头\r\n            prop: 'type', // 渲染的属性\r\n            format: (val) => val || '',\r\n            minWidth: '85' // 最小宽度\r\n          },\r\n          {\r\n            label: '支付日期', // 表头\r\n            prop: 'payoutDate', // 渲染的属性\r\n            format: 'date',\r\n            minWidth: '120' // 最小宽度\r\n          },\r\n          {\r\n            label: '金额',\r\n            prop: 'amount',\r\n            format: 'money',\r\n            minWidth: '120',\r\n            align: 'right'\r\n          },\r\n          {\r\n            business: 'createUser' // 业务部分的快捷使用参考 src\\components\\TableEx\\Column\\businessList.js\r\n          }\r\n        ],\r\n        list: [],\r\n        loading: false\r\n      }\r\n\r\n    }\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    next(vm => {\r\n      vm.fetchData()\r\n    })\r\n  },\r\n  computed: {\r\n    year: {\r\n      get() {\r\n        return `${this.filter.year}-00-00`\r\n      },\r\n      set(val) {\r\n        this.filter.year = val\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    beforeLeave(curr) {\r\n      if (curr === '1') {\r\n        this.$router.push({ name: 'PersonDetail', query: { id: this.myId, refreshRouterName: this.$route.name }})\r\n        return false\r\n      }\r\n      return true\r\n    },\r\n    fetchData() {\r\n      const { id, year } = this.$route.query\r\n      this.myId = id\r\n      GetImprestListByPersonId({ id, year }).then(res => {\r\n        this.myDetails = res\r\n        this.table.list = res.data\r\n        console.log(this.table.list)\r\n      })\r\n    }\r\n  }\r\n}\r\n",null]}