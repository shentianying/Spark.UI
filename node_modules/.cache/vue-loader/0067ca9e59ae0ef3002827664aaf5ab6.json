{"remainingRequest":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects\\spark\\Spark.UI\\src\\views\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projects\\spark\\Spark.UI\\src\\views\\index.vue","mtime":1631525332050},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { getMyBillFlowShowCount, isCheckUp } from '@/api/xtgl/billFlow'\r\nimport PieEcharts from '@/components/Echarts/pieEcharts'\r\nimport CountTo from 'vue-count-to'\r\nexport default {\r\n  name: 'Dashboard',\r\n  components: {\r\n    PieEcharts,\r\n    CountTo\r\n  },\r\n  data() {\r\n    return {\r\n      data1: [],\r\n      text1: '',\r\n      text2: '',\r\n      text3: '',\r\n      loading: false,\r\n      normalCount: 0,\r\n      importantCount: 0,\r\n      unImportantCount: 0\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchData()\r\n  },\r\n  created() {\r\n    // 审批消息 直接跳转页面\r\n    if (\r\n      this.$route.params.pageId &&\r\n      this.$route.params.billId &&\r\n      this.$route.params.billFlowId\r\n    ) {\r\n      // 隐藏掉左边菜单栏\r\n      this.$store.dispatch('app/isShowSideBar', false)\r\n      isCheckUp({ billFlowId: this.$route.params.billFlowId }).then(\r\n        response => {\r\n          const { data } = response\r\n          if (data) {\r\n            // 跳转页面\r\n            this.goDeal(this.$route.params.pageId, this.$route.params.billId)\r\n          } else {\r\n            this.$router.replace({\r\n              path: '/Transfer',\r\n              query: { msg: response.message }\r\n            })\r\n          }\r\n        }\r\n      )\r\n    }\r\n  },\r\n  methods: {\r\n    goDeal(pageId, billId) {\r\n      if (!pageId) return\r\n      const { routerName } = this.getRoute(pageId)\r\n      // console.log('获取的路由名称：', routerName)\r\n      this.$router.replace({\r\n        name: routerName,\r\n        query: { id: billId, refreshRouterName: this.$route.name },\r\n        params: { id: billId, type: 1 }\r\n      })\r\n    },\r\n    getRoute(pageId) {\r\n      // 获取菜单列表\r\n      const getIsMenu = this.$store.getters.menus\r\n      // console.log('获取菜单列表的数量：', getIsMenu.length)\r\n      return getIsMenu.find(f => f.id === pageId)\r\n    },\r\n    goRefresh() {\r\n      this.data1 = []\r\n      this.normalCount = 0\r\n      this.importantCount = 0\r\n      this.unImportantCount = 0\r\n      setTimeout(() => {\r\n        this.fetchData()\r\n      }, 1000)\r\n    },\r\n    fetchData() {\r\n      getMyBillFlowShowCount().then(response => {\r\n        const { data0, data_1, data1, gradeList } = response\r\n        this.normalCount = data0\r\n        this.importantCount = data1\r\n        this.unImportantCount = data_1\r\n        gradeList.forEach(e => {\r\n          if (e.value === 0) {\r\n            this.text1 = e.name\r\n            this.data1.push({\r\n              value: data0,\r\n              name: e.name,\r\n              grade: e.value,\r\n              itemStyle: { color: '#2b821d' }\r\n            })\r\n          }\r\n          if (e.value === 1) {\r\n            this.text2 = e.name\r\n            this.data1.push({\r\n              value: data1,\r\n              name: e.name,\r\n              grade: e.value,\r\n              itemStyle: { color: '#c12e34' }\r\n            })\r\n          }\r\n          if (e.value === -1) {\r\n            this.text3 = e.name\r\n            this.data1.push({\r\n              value: data_1,\r\n              name: e.name,\r\n              grade: e.value,\r\n              itemStyle: { color: '#aaaaaa' }\r\n            })\r\n          }\r\n        })\r\n      })\r\n    },\r\n    goMyBillFlow() {\r\n      this.$router.replace({ name: 'MyBillFlow' })\r\n    },\r\n    goMyBillFlow1(grade) {\r\n      this.$router.replace({\r\n        name: 'MyBillFlow',\r\n        params: { tab: 1, grade: grade }\r\n      }) // 不重要\r\n    },\r\n    callMethod(data) {\r\n      this.goMyBillFlow1(data.grade)\r\n    }\r\n  }\r\n}\r\n",null]}