{"remainingRequest":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects\\spark\\Spark.UI\\src\\views\\cwgl\\zjgl\\Expend\\details.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projects\\spark\\Spark.UI\\src\\views\\cwgl\\zjgl\\Expend\\details.vue","mtime":1635749455633},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\n// monopolize\r\nimport { GetExpendById } from '@/api/cwgl/zjgl/Expend.js'\r\nexport default {\r\n  name: 'ZiJinZhiChuDetails',\r\n  data() {\r\n    return {\r\n      loading: false, // 获取数据状态\r\n      myDetails: null // 详情数据\r\n    }\r\n  },\r\n  computed: {\r\n    /**\r\n     * 详情字段计算\r\n     */\r\n    infoList() {\r\n      const {\r\n        number,\r\n        orgName,\r\n        expendTypeName,\r\n        capitalTypeName,\r\n        expendDate,\r\n        personName,\r\n        amount,\r\n        summary,\r\n        remark,\r\n        createUserName,\r\n        createDate,\r\n        lastEditUserName,\r\n        lastEditDate,\r\n        pageName,\r\n        pageId,\r\n        billId\r\n      } = this.myDetails || {}\r\n      const { $moment, goDeal } = this\r\n      // 遍历的数据 label:展示名   value:展示值  monopolize:独占一行   name:对应response返回的属性名  click: 点击时触发的事件 params 点击事件的参数\r\n      return [\r\n        { label: '支出编号', value: number },\r\n        { label: '部门', value: orgName },\r\n        { label: '支出类型', value: expendTypeName },\r\n        { label: '资金形式', value: capitalTypeName },\r\n        { label: '支出日期', value: $moment(expendDate).format('YYYY-MM-DD') },\r\n        { label: '经手人', value: personName },\r\n        { label: '金额', value: this.utils.formatMoney(amount, 2, 0) },\r\n        { label: '摘要', value: summary },\r\n        { label: '备注', value: remark, monopolize: true },\r\n        { label: '制单人', value: createUserName },\r\n        { label: '制单时间', value: createDate },\r\n        { label: '更新人', value: lastEditUserName },\r\n        { label: '更新时间', value: lastEditDate },\r\n        { label: '源头', value: pageName, click: goDeal, params: [pageId, billId] }\r\n      ]\r\n    }\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    next(vm => {\r\n      vm.fetchData()\r\n    })\r\n  },\r\n  methods: {\r\n    /**\r\n     * @description: 数据获取转换函数\r\n     */\r\n    async fetchData() {\r\n      this.myId = this.$route.query.id\r\n      if (!this.myId) return\r\n      this.loading = true\r\n      try {\r\n        // To do\r\n        const res = await GetExpendById(this.myId)\r\n        this.myDetails = res.data\r\n      } catch (e) {\r\n        console.log('fetchData:请求列表数据失败，错误信息：', e)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    /**\r\n     * 前往源头\r\n     * @param {*} pageId 路由id\r\n     * @param {*} billId 单据id\r\n     */\r\n    goDeal(pageId, billId) {\r\n      if (!pageId) return\r\n      const { routerName } = this.getRoute(pageId)\r\n      this.$router.replace({ name: routerName, query: { id: billId, refreshRouterName: this.$route.name }, params: { id: billId, type: 1 }})\r\n    },\r\n    /**\r\n     * 获取源头路由\r\n     * @param {*} pageId 路由ID\r\n     * @returns 对应路由\r\n     */\r\n    getRoute(pageId) {\r\n      // 获取菜单列表\r\n      const getIsMenu = this.$store.getters.menus\r\n      return getIsMenu.find(f => f.id === pageId)\r\n    }\r\n  }\r\n}\r\n",null]}