{"remainingRequest":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects\\spark\\Spark.UI\\src\\views\\rsgl\\rygl\\personDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projects\\spark\\Spark.UI\\src\\views\\rsgl\\rygl\\personDetail.vue","mtime":1634781213001},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { getPersonById } from '@/api/rsgl/person'\r\nimport { GetImprestListByPersonId } from '@/api/xmgl/ProjectSettle.js'\r\nimport { getPersonPostListById } from '@/api/rsgl/personPost'\r\nimport TableEx from '@/components/TableEx'\r\nexport default {\r\n  name: 'PersonDetail',\r\n  components: { TableEx },\r\n  data() {\r\n    return {\r\n      ruleForm: {\r\n        name: '',\r\n        number: '',\r\n        companyId: this.$store.state.user.selectOrgId,\r\n        organizationId: null,\r\n        postId: 0,\r\n        personTypeID: null,\r\n        inUse: true,\r\n        isUser: true,\r\n        idType: '',\r\n        idNumber: '',\r\n        phoneNumber: '',\r\n        idAddress: '',\r\n        homeAddres: '',\r\n        gender: '',\r\n        nation: '',\r\n        birthDate: null,\r\n        expirationDate: '',\r\n        remark: '',\r\n        post: [],\r\n        organization: []\r\n      },\r\n      imprestTable: {\r\n        year: new Date().getFullYear(),\r\n        columns: [\r\n          {\r\n            label: '单据号', // 表头\r\n            prop: 'number', // 渲染的属性\r\n            minWidth: '120' // 最小宽度\r\n          },\r\n          {\r\n            label: '摘要',\r\n            prop: 'summary',\r\n            minWidth: '120'\r\n          },\r\n          {\r\n            label: '备注',\r\n            prop: 'remark',\r\n            minWidth: '120'\r\n          },\r\n          {\r\n            label: '部门',\r\n            prop: 'orgName',\r\n            minWidth: '120'\r\n          },\r\n          {\r\n            label: '类别', // 表头\r\n            prop: 'type', // 渲染的属性\r\n            format: (val) => val || '',\r\n            minWidth: '85' // 最小宽度\r\n          },\r\n          {\r\n            label: '支付日期', // 表头\r\n            prop: 'payoutDate', // 渲染的属性\r\n            format: 'date',\r\n            minWidth: '120' // 最小宽度\r\n          },\r\n          {\r\n            label: '金额',\r\n            prop: 'amount',\r\n            format: 'money',\r\n            minWidth: '120',\r\n            align: 'right'\r\n          },\r\n          {\r\n            business: 'createUser' // 业务部分的快捷使用参考 src\\components\\TableEx\\Column\\businessList.js\r\n          }\r\n        ],\r\n        list: [],\r\n        loading: false\r\n      },\r\n      activeTab: '基本信息',\r\n      orgStr: '',\r\n      listLoading: false,\r\n      positionList: [], // 职务\r\n      PersonPostList: [], // 岗位信息\r\n      idTypeList: [], // 证件类型列表\r\n      bankList: [],\r\n      personTypeList: [] // 员工类型列表\r\n    }\r\n  },\r\n  computed: {\r\n    imprestYear: {\r\n      get() {\r\n        return `${this.imprestTable.year}-00-00`\r\n      },\r\n      set(val) {\r\n        this.imprestTable.year = new Date(val).getFullYear()\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    activeTab(val) {\r\n      switch (val) {\r\n        case '备用金信息':\r\n          this.getImprestList()\r\n          break\r\n\r\n        default:\r\n          break\r\n      }\r\n    }\r\n  },\r\n  activated() {\r\n    if (this.$route.params.id) {\r\n      this.fetchData()\r\n      this.refreshRouterName = this.$route.params.refreshRouterName\r\n    } else {\r\n      this.$refs['ruleForm'].resetFields()\r\n    }\r\n  },\r\n  methods: {\r\n    getImprestList() {\r\n      this.imprestTable.loading = true\r\n      GetImprestListByPersonId({ id: this.$route.query.id, year: this.imprestTable.year }).then(res => {\r\n        this.imprestTable.list = res.data\r\n      }).finally(() => {\r\n        this.imprestTable.loading = false\r\n      })\r\n    },\r\n    async fetchData() {\r\n      if (this.$route.query.id !== 0) {\r\n        this.listLoading = true\r\n        await getPersonById({ id: this.$route.query.id }).then((response) => {\r\n          const { data, data1, orgStr, data3, data4, data5 } = response\r\n          // 3.员工类型下拉数据\r\n          this.personTypeList = data3\r\n          // 4.证件类型下拉数据\r\n          this.idTypeList = data4\r\n          // 5.开户行类型下拉数据\r\n          this.bankList = data5\r\n          this.ruleForm = data\r\n          this.orgStr = orgStr\r\n          this.userOrg = data1\r\n          this.ruleForm.idType = Number(this.ruleForm.idType)\r\n        })\r\n        getPersonPostListById({ id: this.$route.query.id }).then((response) => {\r\n          const { data, data1 } = response\r\n          this.positionList = data1\r\n          this.PersonPostList = data\r\n          this.listLoading = false\r\n        })\r\n      }\r\n    },\r\n    closeThePage() {\r\n      this.utils.closeAndRefresh(this.$route.query.refreshRouterName)\r\n    }\r\n  }\r\n}\r\n",null]}