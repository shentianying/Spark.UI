{"remainingRequest":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects\\spark\\Spark.UI\\src\\views\\cggl\\quotation\\quotationAttitude.vue?vue&type=template&id=2770dd67&scoped=true&","dependencies":[{"path":"D:\\Projects\\spark\\Spark.UI\\src\\views\\cggl\\quotation\\quotationAttitude.vue","mtime":1635216068744},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n<div v-if=\"activate\" class=\"app-container\">\n  <div v-show=\"active===0 || active===3\">\n    <div style=\"padding:10px 0px;\">\n      <el-form\n        ref=\"ruleForm\"\n        status-icon\n        :model=\"ruleForm\"\n        :rules=\"rules\"\n        label-width=\"120px\"\n        class=\"\"\n        size=\"mini\"\n      >\n        <el-form-item align=\"right\">\n          <el-button v-if=\"ruleForm.state!==10000\" type=\"success\" :loading=\"loading\" @click=\"addContractAttitude()\">发起合同评审</el-button>\n          <el-button v-if=\"ruleForm.state===0\" type=\"default\" :loading=\"loading\" @click=\"quotationAgain()\">再次报价</el-button>\n        </el-form-item>\n        <el-row :gutter=\"10\">\n          <el-col :sm=\"12\" :xs=\"24\">\n            <el-form-item label=\"编号\">\n              {{ ruleForm.number }}\n            </el-form-item>\n            <el-form-item label=\"使用项目\">\n              {{ ruleForm.orgStr }}\n            </el-form-item>\n            <el-form-item label=\"价格执行期\">\n              <div v-if=\"ruleForm.executeStartDate\">\n                {{ ruleForm.executeStartDate | dateFormat }} → {{ ruleForm.executeEndDate | dateFormat }}\n              </div>\n            </el-form-item>\n            <el-form-item v-if=\"ruleForm.state!==10000\" label=\"建议中标单位\" prop=\"recommendSupplier\">\n              <el-select v-model=\"ruleForm.recommendSupplier\" style=\"width:100%\" @change=\"supplierChange\">\n                <el-option v-for=\"(item,index) in suppliers\" :key=\"index\" :label=\"item.name\" :value=\"item.id\">\n                  <span>{{ item.name }}</span>\n                </el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"创建人\">\n              {{ ruleForm.createUserName }}\n            </el-form-item>\n            <el-form-item label=\"提交人\">\n              {{ ruleForm.submitUserName }}\n            </el-form-item>\n            <el-form-item label=\"最后修改人\">\n              {{ ruleForm.lastEditUserName }}\n            </el-form-item>\n            <el-form-item label=\"报价轮次\">\n              {{ ruleForm.times }}\n            </el-form-item>\n          </el-col>\n          <el-col :sm=\"12\" :xs=\"24\">\n            <el-form-item label=\"使用部位及用途\">\n              {{ ruleForm.useSpace }}\n            </el-form-item>\n            <el-form-item label=\"采购执行人\">\n              {{ ruleForm.executeUserName }}\n            </el-form-item>\n            <el-form-item label=\"所属任务单号\">\n              <el-link :underline=\"false\" @click=\"openTask(ruleForm.taskId)\">{{ ruleForm.taskNumber }}</el-link>\n            </el-form-item>\n            <el-form-item v-if=\"ruleForm.state!==10000\" label=\" \">\n              &nbsp;\n            </el-form-item>\n            <el-form-item label=\"创建日期\">\n              {{ ruleForm.createDate }}\n            </el-form-item>\n            <el-form-item label=\"提交日期\">\n              {{ ruleForm.submitDate }}\n            </el-form-item>\n            <el-form-item label=\"最后修改日期\">\n              {{ ruleForm.lastEditDate }}\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n    </div>\n    <el-collapse v-model=\"activeNames\">\n      <el-collapse-item title=\"\" name=\"0\">\n        <template slot=\"title\">\n          <i class=\"el-icon-s-comment\" />报价对比信息\n        </template>\n        <!-- 合计 -->\n        <!-- :summary-method=\"getSummaries\" -->\n        <el-table\n          v-loading=\"loading\"\n          :data=\"list\"\n          :span-method=\"arraySpanMethod\"\n          element-loading-text=\"Loading\"\n          border\n          fit\n          highlight-current-row\n          :cell-style=\"cellStyle\"\n          style=\"font-size: 10px\"\n          size=\"mini\"\n        >\n          <el-table-column label=\"材料名称\" align=\"center\" min-width=\"100\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.categoryName }}\n            </template>\n          </el-table-column>\n          <el-table-column v-if=\"columnShow.brand\" label=\"品牌/产地\" align=\"center\" width=\"80\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.brand }}\n            </template>\n          </el-table-column>\n          <el-table-column v-if=\"columnShow.model\" label=\"型号\" align=\"center\" width=\"80\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.model }}\n            </template>\n          </el-table-column>\n          <el-table-column v-if=\"columnShow.spec\" label=\"规格/尺寸\" align=\"center\" width=\"100\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.spec }}\n            </template>\n          </el-table-column>\n          <el-table-column v-if=\"columnShow.thickness\" label=\"厚度\" align=\"center\" width=\"80\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.thickness }}\n            </template>\n          </el-table-column>\n          <el-table-column v-if=\"columnShow.texture\" label=\"材质\" align=\"center\" width=\"100\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.texture }}\n            </template>\n          </el-table-column>\n          <el-table-column v-if=\"columnShow.surfaceTreatment\" label=\"表面处理/工艺、色号\" align=\"center\" width=\"200\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.surfaceTreatment }}\n            </template>\n          </el-table-column>\n          <el-table-column v-if=\"columnShow.designNumber\" label=\"设计编号\" align=\"center\" width=\"100\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.designNumber }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"主单位\" align=\"center\" width=\"60\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.unit }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"主数量\" align=\"center\" width=\"80\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.applicationQuantity }}\n            </template>\n          </el-table-column>\n          <el-table-column v-if=\"columnShow.unit2\" label=\"辅单位\" align=\"center\" width=\"60\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.unit2 }}\n            </template>\n          </el-table-column>\n          <el-table-column v-if=\"columnShow.unit2\" label=\"辅数量\" align=\"center\" width=\"80\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.applicationQuantity2 }}\n            </template>\n          </el-table-column>\n          <el-table-column v-for=\"(item,index) in ruleForm.quotationSuppliers\" :key=\"index\" :label=\"item.supplier.name\" align=\"center\" width=\"100\">\n            <template>\n              <el-table-column label=\"含税单价\" align=\"center\" width=\"150\">\n                <template slot-scope=\"scope\">\n                  <p v-if=\"scope.row.categoryName!=='付款方式'&&scope.row.taxInclusivePrice!==''\">\n                    {{ scope.row.taxInclusivePrice.find(f=>f.id===item.supplierId).value }}\n                  </p>\n                  <p v-else-if=\"scope.row.categoryName==='付款方式'\">\n                    <ul v-for=\"(item_sup,index_sup) in scope.row.taxInclusivePrice.find(f=>f.id===item.supplierId).value\" :key=\"index_sup\">\n                      付款方式：{{ item_sup.requirement }}，支付比例：{{ item_sup.scale }}，天数：{{ item_sup.days }}\n                    </ul>\n                  </p>\n                </template>\n              </el-table-column>\n              <el-table-column label=\"税率\" align=\"center\" width=\"150\">\n                <template slot-scope=\"scope\">\n                  <p v-if=\"scope.row.taxRate!==''\">\n                    {{ (scope.row.taxRate.find(f=>f.id===item.supplierId).value * 100).toFixed(2) }}%\n                  </p>\n                </template>\n              </el-table-column>\n              <el-table-column label=\"含税金额\" align=\"center\" width=\"150\">\n                <template slot-scope=\"scope\">\n                  <p v-if=\"scope.row.taxInclusiveAmount!==''\">\n                    {{ scope.row.taxInclusiveAmount.find(f=>f.id===item.supplierId).value }}\n                  </p>\n                </template>\n              </el-table-column>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"备注\" align=\"center\" width=\"150\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.remark }}\n            </template>\n          </el-table-column>\n        </el-table>\n        <!-- <div v-show=\"active===0\" style=\"text-align:center; margin-top:15px;\">\n          <el-button size=\"mini\" type=\"success\" :loading=\"loading\" @click=\"getDynamicFlow()\">下一步➜</el-button>\n        </div> -->\n      </el-collapse-item>\n      <el-collapse-item v-if=\"contractList.length>0\" title=\"\" name=\"1\">\n        <template slot=\"title\">\n          <i class=\"el-icon-s-comment\" />合同评审信息\n        </template>\n        <!-- 合同评审 -->\n        <el-table\n          v-loading=\"loading\"\n          :data=\"contractList\"\n          border\n          highlight-current-row\n          size=\"mini\"\n        >\n          <!-- <el-table-column type=\"index\" width=\"55\" align=\"center\" /> -->\n          <el-table-column label=\"合同编号\" header-align=\"center\" width=\"130\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.number }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"部门\" align=\"center\" min-width=\"10\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.organization.name }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"日期\" header-align=\"center\" width=\"130\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.contractDate | dateFormat }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"状态\" align=\"center\" min-width=\"10\">\n            <template slot-scope=\"scope\">\n              <el-tag type=\"primary\" size=\"mini\" effect=\"plain\">{{ getFormState(scope.row) }}</el-tag>\n            </template>\n          </el-table-column>\n\n          <el-table-column align=\"center\" label=\"待审批人\" min-width=\"10\" :show-overflow-tooltip=\"true\">\n            <template slot-scope=\"scope\">\n              {{ getPerson(scope.row.billFlow) }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"制单人\" align=\"center\" min-width=\"10\">\n            <template slot-scope=\"scope\">\n              <el-tooltip placement=\"top\" :enterable=\"false\" effect=\"light\">\n                <div slot=\"content\">\n                  制单人：{{ scope.row.createUserName }} 制单时间：{{ scope.row.createDate }}<br>\n                  更新人：{{ scope.row.lastEditUserName }} 更新时间：{{ scope.row.lastEditDate }}\n                </div>\n                <span>{{ scope.row.createUserName }}</span>\n              </el-tooltip>\n            </template>\n          </el-table-column>\n\n          <el-table-column label=\"操作\" align=\"center\" width=\"80\">\n            <template slot-scope=\"scope\">\n              <el-tooltip content=\"编辑\" effect=\"light\" placement=\"left-start\" :enterable=\"false\">\n                <el-button v-if=\"scope.row.state===0\" v-has=\"'CONTRACT_EDIT'\" size=\"mini\" class=\"el-icon-edit\" plain circle @click=\"handleEdit(scope.row)\" />\n              </el-tooltip>\n              <el-tooltip content=\"审查\" effect=\"light\" placement=\"left-start\" :enterable=\"false\">\n                <el-button v-if=\"scope.row.state>0\" size=\"mini\" class=\"el-icon-edit-outline\" plain circle @click=\"attitude(scope.row)\" />\n              </el-tooltip>\n            </template>\n          </el-table-column>\n        </el-table>\n      </el-collapse-item>\n      <el-collapse-item v-if=\"quotationList.length>0\" title=\"\" name=\"2\">\n        <template slot=\"title\">\n          <i class=\"el-icon-s-comment\" />历史报价单\n        </template>\n        <el-table\n          v-loading=\"loading\"\n          :data=\"quotationList\"\n          element-loading-text=\"Loading\"\n          border\n          fit\n          highlight-current-row\n          size=\"mini\"\n        >\n          <!-- <el-table-column type=\"index\" width=\"55\" align=\"center\" /> -->\n          <el-table-column label=\"编号\" align=\"center\" min-width=\"100\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.number }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"使用项目\" align=\"center\" width=\"100\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.organization.name }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"价格执行期\" align=\"center\" width=\"250\">\n            <template slot-scope=\"scope\">\n              <div v-if=\"scope.row.executeStartDate\">\n                {{ scope.row.executeStartDate | dateFormat }} → {{ scope.row.executeEndDate | dateFormat }}\n              </div>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"使用部位及用途\" align=\"center\" width=\"150\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.useSpace }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"报价轮次\" align=\"center\" width=\"100\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.times }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"备注\" align=\"center\" min-width=\"200\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.remark }}\n            </template>\n          </el-table-column>\n          <!-- <el-table-column label=\"操作\" align=\"center\" min-width=\"200\">\n            <template slot-scope=\"scope\">\n              <el-tooltip content=\"查看\" effect=\"light\" placement=\"left-start\" :enterable=\"true\">\n                <el-button size=\"mini\" class=\"el-icon-edit-outline\" plain circle @click=\"detail(scope.row)\" />\n              </el-tooltip>\n            </template>\n          </el-table-column> -->\n        </el-table>\n      </el-collapse-item>\n    </el-collapse>\n  </div>\n  <!--流程显示-->\n  <div v-show=\"active===1\">\n    <flow-select v-if=\"billFlow\" ref=\"flowSelect\" :is-edit=\"true\" :bill-flow=\"billFlow\" />\n    <div style=\"text-align:center;margin-top:10px;\">\n      <el-button size=\"mini\" type=\"warning\" :loading=\"loading\" @click=\"cancel()\">作废</el-button>\n      <el-button size=\"mini\" type=\"primary\" :loading=\"loading\" @click=\"submitForm(1)\">提交</el-button>\n      <el-button size=\"mini\" type=\"success\" :loading=\"loading\" @click=\"submitForm(0)\">保存</el-button>\n      <el-button size=\"mini\" type=\"success\" :loading=\"loading\" @click=\"previous()\">上一步</el-button>\n    </div>\n  </div>\n\n  <div v-show=\"active===3\">\n    <!--流程信息-->\n    <flow-display v-if=\"billFlow\" ref=\"flowSelectDisplay\" :is-edit=\"true\" :bill-flow=\"billFlow\" />\n\n    <flow-attitude\n      v-if=\"isLoad\"\n      ref=\"flowAttitude\"\n      :show=\"true\"\n      :para=\"attitudePara\"\n      @update=\"updateFlow\"\n    >\n      <template #saveBtn>\n        <!--当前审批人拥有支付的操作-->\n        <!-- <el-button v-if=\"showPayButton\" size=\"mini\" type=\"success\">特殊操作，支付</el-button> -->\n        <!--调用单据中controller操作-->\n        <el-button size=\"mini\" type=\"success\" :loading=\"loading\" @click=\"submitAttitude()\">保存</el-button>\n      </template>\n      <template #otherBtn>\n        <!-- <el-button size=\"mini\" type=\"der\">测试其他插槽</el-button> -->\n      </template>\n    </flow-attitude>\n  </div>\n\n  <div v-if=\"dialogTableVisible\">\n    <el-dialog\n      :title=\"dialogTitle\"\n      :destroy-on-close=\"true\"\n      :visible.sync=\"dialogTableVisible\"\n      :width=\"dialogWidth\"\n      :append-to-body=\"false\"\n    >\n      <component :is=\"comName\" :obj=\"currentRow\" :is-preview=\"true\" :file-list=\"fileList\" fullscreen=\"fullscreen\" @dialogClose=\"dialogClose\" />\n    </el-dialog>\n  </div>\n</div>\n",null]}