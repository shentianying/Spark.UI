{"remainingRequest":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects\\spark\\Spark.UI\\src\\views\\cggl\\supplier\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projects\\spark\\Spark.UI\\src\\views\\cggl\\supplier\\index.vue","mtime":1635216068752},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { getSupplierPaging } from '@/api/cggl/supplier'\r\nimport { formatTime } from '@/utils/index'\r\nimport SearchForm from '@/components/Other/searchForm'\r\nexport default {\r\n  name: 'Supplier',\r\n  components: {\r\n    SearchForm\r\n  },\r\n  data() {\r\n    return {\r\n      list: [],\r\n      listLoading: false,\r\n      dialogTableVisible: false,\r\n      dialogTitle: '保存',\r\n\r\n      total: 0,\r\n      currentPage: 1,\r\n      pageSize: this.utils.getPersonalSettings().pageSize,\r\n\r\n      currentRow: null,\r\n      buttonLoading: false,\r\n      searchText: ''\r\n\r\n      // organizationId: this.$store.state.user.selectOrgId\r\n    }\r\n  },\r\n  activated() {\r\n    if (this.$route.params.refresh) {\r\n      this.fetchData()\r\n    }\r\n  },\r\n  mounted() {\r\n    // console.log('index 页面：router:', this.$route)\r\n    this.fetchData()\r\n  },\r\n  methods: {\r\n    fetchData() {\r\n      this.getPorperty()\r\n    },\r\n    sizeChange(val) {\r\n      this.pageSize = val\r\n      this.fetchData()\r\n    },\r\n    goSearch() {\r\n      this.getPorperty()\r\n    },\r\n    getPorperty() {\r\n      this.listLoading = true\r\n      var postData = {}\r\n      postData.name = this.searchText\r\n      postData.currentPage = this.currentPage\r\n      postData.pageSize = this.pageSize\r\n      // postData.orgId = this.orgValue\r\n      getSupplierPaging(postData).then(response => {\r\n        const { data, count } = response\r\n        // 星级数字更改显示：-1——不合格 0——合格等等\r\n        data.forEach(element => {\r\n          if (element.rate === -1) {\r\n            element.rate = '不合格'\r\n          }\r\n          if (element.rate === 0) {\r\n            element.rate = '合格'\r\n          }\r\n          if (element.rate === 1) {\r\n            element.rate = '⭐'\r\n          }\r\n          if (element.rate === 2) {\r\n            element.rate = '⭐⭐'\r\n          }\r\n          if (element.rate === 3) {\r\n            element.rate = '⭐⭐⭐'\r\n          }\r\n          if (element.rate === 4) {\r\n            element.rate = '⭐⭐⭐⭐'\r\n          }\r\n          if (element.rate === 5) {\r\n            element.rate = '⭐⭐⭐⭐⭐'\r\n          }\r\n          element.message = '制单人：' + element.createUserName + '  制单时间：' + formatTime(new Date(element.createDate), '{y}-{m}-{d} {h}:{i}:{s}') + '\\n' + '更新人：' + element.lastEditUserName + '更新时间：' + formatTime(new Date(element.lastEditDate), '{y}-{m}-{d} {h}:{i}:{s}')\r\n        })\r\n        this.list = data\r\n        this.total = count\r\n        this.listLoading = false\r\n      }).catch(() => { this.listLoading = false })\r\n    },\r\n    dialogClose() {\r\n      this.dialogTableVisible = false\r\n      this.getPorperty()\r\n    },\r\n    handleAdd() {\r\n      this.$store.dispatch('tagsView/delView', { name: 'SupplierAdd' })\r\n        .then(() => {\r\n          this.$router.push({ name: 'SupplierAdd', query: { refreshRouterName: this.$route.name }})\r\n        })\r\n    },\r\n    handleEdit(id) {\r\n      this.$router.push({ name: 'SupplierAdd', query: { id: id, refreshRouterName: this.$route.name }, params: { id: id }})\r\n    },\r\n    handleDetail(id) {\r\n      this.$router.push({ name: 'SupplierDetail', query: { id: id, refreshRouterName: this.$route.name }, params: { id: id }})\r\n    },\r\n    handleApproval(id, type) {\r\n      this.$router.push({ name: 'SupplierAttitude', query: { id: id, type: type, refreshRouterName: this.$route.name }, params: { id: id }})\r\n    }\r\n    // ,\r\n    // handleDel(id) {\r\n    //   this.$confirm('是否确定删除?', '提示', {\r\n    //     confirmButtonText: '确定',\r\n    //     cancelButtonText: '取消',\r\n    //     type: 'warning'\r\n    //   }).then(() => {\r\n    //     deleteMaterialProperty({ id: id }).then(response => {\r\n    //       this.getPorperty()\r\n    //       this.$message.success(response.message)\r\n    //     })\r\n    //   }).catch(() => {\r\n    //     this.$message.info('已经取消删除')\r\n    //   })\r\n    // }\r\n  }\r\n}\r\n",null]}