{"remainingRequest":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects\\spark\\Spark.UI\\src\\views\\cggl\\jhgl\\planAttitude.vue?vue&type=template&id=4a9fdcb3&scoped=true&","dependencies":[{"path":"D:\\Projects\\spark\\Spark.UI\\src\\views\\cggl\\jhgl\\planAttitude.vue","mtime":1632015294593},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\spark\\Spark.UI\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n<div v-if=\"activate\" class=\"app-container\">\n  <div style=\"padding:10px 0px;\">\n    <!-- <h2>计划单</h2> -->\n    <el-form\n      ref=\"ruleForm\"\n      status-icon\n      :model=\"ruleForm\"\n      :rules=\"rules\"\n      label-width=\"120px\"\n      class=\"\"\n      size=\"mini\"\n    >\n      <el-row :gutter=\"10\">\n        <el-col :sm=\"12\" :xs=\"24\">\n          <el-form-item label=\"计划编号\" prop=\"number\">\n            {{ ruleForm.number }}\n            <!-- <el-input v-model=\"ruleForm.number\" disabled readonly=\"readonly\" placeholder=\"自动生成\" size=\"mini\" maxlength=\"50\" /> -->\n          </el-form-item>\n\n          <el-form-item\n            label=\"项目\"\n            prop=\"orgId\"\n          >\n            {{ orgStr }}\n          </el-form-item>\n\n          <el-form-item label=\"计划类型\" prop=\"planType\">\n            {{ ruleForm.planTypeName }}\n          </el-form-item>\n          <el-form-item label=\"创建人\">\n            {{ ruleForm.createUserName }}\n          </el-form-item>\n          <el-form-item label=\"提交人\">\n            {{ ruleForm.submitUserName }}\n          </el-form-item>\n          <el-form-item label=\"最后修改人\">\n            {{ ruleForm.lastEditUserName }}\n          </el-form-item>\n          <el-form-item label=\"附件\">\n            <up-file v-if=\"ruleForm.fileList\" v-model=\"ruleForm.fileList\" :is-preview=\"true\" :is-upfile=\"false\" :is-delete=\"false\" :file-list=\"ruleForm.fileList\" />\n          </el-form-item>\n        </el-col>\n\n        <el-col :sm=\"12\" :xs=\"24\">\n          <el-form-item label=\"实际计划单号\">\n            {{ ruleForm.realNumber }}\n          </el-form-item>\n          <el-form-item label=\"备注\">\n            {{ ruleForm.remark }}\n          </el-form-item>\n          <el-form-item label=\" \">\n            &nbsp;\n          </el-form-item>\n          <el-form-item label=\"创建日期\">\n            {{ ruleForm.createDate }}\n          </el-form-item>\n          <el-form-item label=\"提交日期\">\n            {{ ruleForm.submitDate }}\n          </el-form-item>\n          <el-form-item label=\"最后修改日期\">\n            {{ ruleForm.lastEditDate }}\n          </el-form-item>\n          <el-form-item label=\"材料类型\" prop=\"materialType\">\n            {{ ruleForm.materialTypeName }}\n          </el-form-item>\n        </el-col>\n      </el-row>\n    </el-form>\n  </div>\n\n  <div class=\"flex_div\">\n    <excel-export\n      style=\"margin-right:10px;\"\n      book-type=\"xlsx\"\n      filename=\"计划材料明细\"\n      :sheet=\"sheet\"\n      :on-error=\"onError\"\n      :before-start=\"beforeStart\"\n    >\n      <el-button :loading=\"loading\" size=\"mini\">导出计划材料明细</el-button>\n    </excel-export>\n  </div>\n  <el-tabs type=\"border-card\">\n    <el-tab-pane label=\"材料明细\">\n      <div v-show=\"special_operation\" class=\"flex_div\">\n        <el-button :loading=\"loading\" type=\"success\" size=\"mini\" @click=\"addTask()\">分配任务单</el-button>\n        <el-button :loading=\"loading\" type=\"danger\" size=\"mini\" @click=\"returnMaterial()\">退回材料</el-button>\n      </div>\n      <!-- 材料分类数据 -->\n      <el-table\n        ref=\"multipleTable\"\n        v-loading=\"loading\"\n        :data=\"list\"\n        element-loading-text=\"Loading\"\n        border\n        fit\n        highlight-current-row\n        size=\"mini\"\n        @selection-change=\"handleSelectionChange\"\n      >\n        <el-table-column v-if=\"special_operation\" type=\"selection\" :selectable=\"selectInit\" fixed=\"left\" align=\"center\" width=\"55\" />\n        <el-table-column type=\"index\" width=\"55\" align=\"center\" />\n        <el-table-column label=\"材料名称\" align=\"center\" min-width=\"100\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.category.name }}\n          </template>\n        </el-table-column>\n        <el-table-column v-if=\"columnShow.brand\" label=\"品牌/产地\" align=\"center\" width=\"80\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.brand }}\n          </template>\n        </el-table-column>\n        <el-table-column v-if=\"columnShow.model\" label=\"型号\" align=\"center\" width=\"80\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.model }}\n          </template>\n        </el-table-column>\n        <el-table-column v-if=\"columnShow.spec\" label=\"规格/尺寸\" align=\"center\" width=\"100\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.spec }}\n          </template>\n        </el-table-column>\n        <el-table-column v-if=\"columnShow.thickness\" label=\"厚度\" align=\"center\" width=\"80\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.thickness }}\n          </template>\n        </el-table-column>\n        <el-table-column v-if=\"columnShow.texture\" label=\"材质\" align=\"center\" width=\"100\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.texture }}\n          </template>\n        </el-table-column>\n        <el-table-column v-if=\"columnShow.surfaceTreatment\" label=\"表面处理/工艺、色号\" align=\"center\" width=\"200\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.surfaceTreatment }}\n          </template>\n        </el-table-column>\n        <el-table-column v-if=\"columnShow.designNumber\" label=\"设计编号\" align=\"center\" width=\"100\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.designNumber }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"主单位\" align=\"center\" width=\"60\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.category.unit }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"主数量\" align=\"center\" width=\"80\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.applicationQuantity }}\n          </template>\n        </el-table-column>\n        <el-table-column v-if=\"columnShow.unit2\" label=\"辅单位\" align=\"center\" width=\"60\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.unit2 }}\n          </template>\n        </el-table-column>\n        <el-table-column v-if=\"columnShow.unit2\" label=\"辅数量\" align=\"center\" width=\"80\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.applicationQuantity2 }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"进场日期\" align=\"center\" width=\"100\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.entryDate | dateFormat }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"状态\" align=\"center\" width=\"100\">\n          <template slot-scope=\"scope\">\n            {{ stateList.find(f=>f.value === scope.row.state).name }}\n          </template>\n        </el-table-column>\n        <!-- <el-table-column label=\"附件\" align=\"center\" width=\"100\">\n          <template slot-scope=\"scope\">\n            <el-link v-if=\"scope.row.fileList.length\" type=\"info\" @click=\"showFileList(scope.row.fileList)\">查看</el-link>\n            <span v-else>-</span>\n          </template>\n        </el-table-column> -->\n        <el-table-column label=\"备注\" align=\"center\" min-width=\"200\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.remark }}\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-tab-pane>\n    <el-tab-pane label=\"任务单明细\">\n      <!-- 任务单信息 -->\n      <el-table\n        v-loading=\"loading\"\n        :data=\"taskList\"\n        element-loading-text=\"Loading\"\n        border\n        fit\n        highlight-current-row\n        size=\"mini\"\n      >\n        <el-table-column type=\"index\" width=\"55\" align=\"center\" />\n        <el-table-column label=\"编号\" min-width=\"10\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.number }}\n          </template>\n        </el-table-column>\n        <!-- <el-table-column label=\"项目\" align=\"center\" min-width=\"10\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.organization.name }}\n          </template>\n        </el-table-column> -->\n        <el-table-column label=\"采购员\" align=\"center\" min-width=\"10\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.person.name }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"下达时间\" align=\"center\" min-width=\"10\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.createDate | dateTimeFormat }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"状态\" align=\"center\" min-width=\"10\">\n          <template slot-scope=\"scope\">\n            <el-tag v-if=\"scope.row.state===0\" type=\"primary\" effect=\"plain\">待确认</el-tag>\n            <el-tag v-if=\"scope.row.state===-1\" type=\"success\" effect=\"plain\">拒收</el-tag>\n            <el-tag v-if=\"scope.row.state===10000\" type=\"info\" effect=\"plain\">已确认</el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" align=\"center\" min-width=\"10\">\n          <template slot-scope=\"scope\">\n            <el-tooltip content=\"查看\" effect=\"light\" placement=\"left-start\" :enterable=\"false\">\n              <el-button size=\"mini\" class=\"el-icon-view\" plain circle @click=\"taskDetail(scope.row)\" />\n            </el-tooltip>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-tab-pane>\n    <el-tab-pane label=\"退回单明细\">\n      <!-- 退回单明细 -->\n      <el-table\n        v-loading=\"loading\"\n        :data=\"cancelList\"\n        element-loading-text=\"Loading\"\n        border\n        fit\n        highlight-current-row\n        size=\"mini\"\n      >\n        <el-table-column type=\"index\" width=\"55\" align=\"center\" />\n        <el-table-column label=\"编号\" align=\"center\" min-width=\"30\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.number }}\n          </template>\n        </el-table-column>\n        <!-- <el-table-column label=\"项目\" align=\"center\" min-width=\"10\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.organization.name }}\n          </template>\n        </el-table-column> -->\n        <el-table-column align=\"center\" label=\"待审批人\" min-width=\"50\" :show-overflow-tooltip=\"true\">\n          <template slot-scope=\"scope\">\n            {{ getPerson(scope.row.billFlow) }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"备注\" align=\"center\" min-width=\"80\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.remark }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"状态\" align=\"center\" min-width=\"10\">\n          <template slot-scope=\"scope\">\n            <el-tag type=\"primary\" size=\"mini\" effect=\"plain\">{{ getFormState(scope.row) }}</el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" align=\"center\" min-width=\"10\">\n          <template slot-scope=\"scope\">\n            <el-tooltip content=\"审查\" effect=\"light\" placement=\"left-start\" :enterable=\"false\">\n              <el-button v-if=\"scope.row.state>0\" size=\"mini\" class=\"el-icon-edit-outline\" plain circle @click=\"attitude(scope.row)\" />\n            </el-tooltip>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-tab-pane>\n  </el-tabs>\n  <!--流程信息-->\n  <flow-display v-if=\"billFlow\" ref=\"flowSelect\" :is-edit=\"true\" :bill-flow=\"billFlow\" />\n\n  <flow-attitude\n    v-if=\"isLoad\"\n    ref=\"flowAttitude\"\n    :show=\"true\"\n    :para=\"attitudePara\"\n    @update=\"updateFlow\"\n  >\n    <template #saveBtn>\n      <!--当前审批人拥有支付的操作-->\n      <!-- <el-button v-if=\"showPayButton\" size=\"mini\" type=\"success\">特殊操作，支付</el-button> -->\n      <!--调用单据中controller操作-->\n      <el-button size=\"mini\" type=\"success\" :loading=\"loading\" @click=\"submitForm()\">保存</el-button>\n    </template>\n    <template #otherBtn>\n      <!-- <el-button size=\"mini\" type=\"der\">测试其他插槽</el-button> -->\n    </template>\n  </flow-attitude>\n\n  <!-- <msg-info :person-array=\"personArr\" :bill-id=\"39\" :bill-flow-id=\"149\" :page-id=\"41\" /> -->\n\n  <div v-if=\"dialogTableVisible\">\n    <el-dialog\n      :title=\"dialogTitle\"\n      :destroy-on-close=\"true\"\n      :visible.sync=\"dialogTableVisible\"\n      :width=\"dialogWidth\"\n      :append-to-body=\"false\"\n    >\n      <component :is=\"comName\" :obj=\"currentRow\" :is-preview=\"true\" :file-list=\"fileList\" fullscreen=\"fullscreen\" @dialogClose=\"dialogClose\" />\n    </el-dialog>\n  </div>\n</div>\n",null]}